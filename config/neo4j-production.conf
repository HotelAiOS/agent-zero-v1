# Neo4j Production Configuration
# Agent Zero V1 - Optimized for multi-agent workloads
# This configuration provides optimal performance for the Agent Zero V1 system

# ===================================================================
# NETWORK CONFIGURATION
# ===================================================================

# Default interface binding
server.default_listen_address=0.0.0.0

# Bolt connector configuration (Agent communication)
server.bolt.enabled=true
server.bolt.listen_address=0.0.0.0:7687
server.bolt.advertised_address=:7687
server.bolt.tls_level=DISABLED

# HTTP connector configuration (Web interface)
server.http.enabled=true
server.http.listen_address=0.0.0.0:7474
server.http.advertised_address=:7474

# HTTPS connector (disabled in development)
server.https.enabled=false

# ===================================================================
# MEMORY CONFIGURATION - OPTIMIZED FOR AGENT ZERO V1
# ===================================================================

# Page cache size (stores graph data)
# Recommended: 50-75% of available RAM
server.memory.pagecache.size=2G

# Heap size configuration
server.memory.heap.initial_size=1G
server.memory.heap.max_size=2G

# Off-heap transaction state cache
server.tx_state.memory_allocation=ON_HEAP
server.tx_state.max_off_heap_memory=1G

# ===================================================================
# PERFORMANCE TUNING
# ===================================================================

# Transaction timeout (extended for agent operations)
db.transaction.timeout=300s

# Query timeout for long-running agent queries
db.transaction.bookmark_ready_timeout=30s

# Connection pool settings
server.bolt.thread_pool_min_size=5
server.bolt.thread_pool_max_size=400

# ===================================================================
# DATABASE SETTINGS
# ===================================================================

# Enable multi-database support
server.databases.default_to_read_replicas_enabled=false

# Checkpoint configuration for better write performance
db.checkpoint.interval.time=300s
db.checkpoint.interval.tx=100000

# Store configuration
db.store.files.preallocate=true

# ===================================================================
# LOGGING CONFIGURATION
# ===================================================================

# Log level (INFO for production)
server.logs.debug.level=INFO

# Disable GC logging in production
server.logs.gc.enabled=false

# Query logging for monitoring
server.logs.query.enabled=true
server.logs.query.threshold=5s
server.logs.query.parameter_logging_enabled=false

# Security event logging
server.logs.security.enabled=true
server.logs.security.level=INFO

# HTTP request logging
server.logs.http.enabled=true

# ===================================================================
# SECURITY CONFIGURATION
# ===================================================================

# Authentication and authorization
dbms.security.auth_enabled=true

# Password policy
dbms.security.auth_minimum_password_length=8

# Procedures and functions security
dbms.security.procedures.unrestricted=apoc.*,gds.*
dbms.security.procedures.allowlist=apoc.*,gds.*

# ===================================================================
# THREADING AND CONCURRENCY
# ===================================================================

# Worker threads for parallel processing
server.db.query_cache_size=1000
server.db.query_execution_engine=slotted

# Parallel query execution
cypher.parallel_runtime_support=all

# ===================================================================
# AGENT ZERO V1 SPECIFIC OPTIMIZATIONS
# ===================================================================

# Enable parallel backup for better availability
server.backup.enabled=true

# Metrics collection for monitoring
server.metrics.enabled=true
server.metrics.prometheus.enabled=true
server.metrics.prometheus.endpoint=0.0.0.0:2004

# CSV import settings for agent data ingestion
server.directories.import=import

# Plugins directory
server.directories.plugins=plugins

# ===================================================================
# CLUSTERING (for future scaling)
# ===================================================================

# Clustering mode (disabled for standalone)
server.mode=SINGLE

# ===================================================================
# CYPHER CONFIGURATION
# ===================================================================

# Cypher runtime
cypher.default_runtime=slotted

# Query caching
cypher.query_cache_size=1000

# Statistics auto-update for query optimization
cypher.statistics_divergence_threshold=0.75

# ===================================================================
# JVM TUNING HINTS
# ===================================================================

# These should be set as environment variables in docker-compose.yml
# NEO4J_server_jvm_additional=-XX:+UseG1GC
# NEO4J_server_jvm_additional=-XX:+UnlockExperimentalVMOptions
# NEO4J_server_jvm_additional=-XX:+UseTransparentHugePages
# NEO4J_server_jvm_additional=-XX:G1HeapRegionSize=16m

# ===================================================================
# MISCELLANEOUS
# ===================================================================

# Enable shell
server.shell.enabled=true
server.shell.host=127.0.0.1
server.shell.port=1337

# Server user logs
server.logs.user.stdout_enabled=true

# Disable usage statistics reporting
server.usage_report.enabled=false